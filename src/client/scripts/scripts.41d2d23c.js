"use strict";angular.module("djangoItunesStaticsAppInternal",[]),angular.module("djangoItunesStaticsApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngMaterial","djangoItunesStaticsAppInternal"]).config(["$httpProvider",function(a){a.defaults.xsrfCookieName="csrftoken",a.defaults.xsrfHeaderName="X-CSRFToken"}]).config(["$mdThemingProvider",function(a){a.theme("default").primaryPalette("blue")}]).config(["$ariaProvider",function(a){a.config({tabindex:!1})}]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/add.html",controller:"AddCtrl as addCtrl"}).when("/albums",{templateUrl:"views/artists.html",controller:"ArtistsCtrl as artistsCtrl"}).otherwise({redirectTo:"/"})}]);var djangoItunesStaticsApp;!function(a){var b=function(){function a(a,b){this.iTunesApi=a,this.$mdToast=b}return a.$inject=["iTunesApi","$mdToast"],a.prototype.submit=function(){var a=this;this.loading=!0,this.iTunesApi.addArtist(this.artist).then(function(b){var c=b.success?"All albums added":"Artist not found";a.showToast(c)})["catch"](function(){a.showToast("Something went wrong, try again")})["finally"](function(){a.loading=!1})},a.prototype.showToast=function(a){this.$mdToast.show(this.$mdToast.simple().textContent(a).hideDelay(3e3))},a}();a.AddCtrl=b}(djangoItunesStaticsApp||(djangoItunesStaticsApp={})),angular.module("djangoItunesStaticsApp").controller("AddCtrl",djangoItunesStaticsApp.AddCtrl);var djangoItunesStaticsApp;!function(a){var b=function(){function a(a){var b=this;this.iTunesApi=a,this.artists=[],this.artistAlbums=[],a.fetchArtists().then(function(a){angular.copy(a,b.artists),a.length>0&&b.select(b.artists[0].id)})}return a.$inject=["iTunesApi"],a.prototype.select=function(a){var b=this;this.selected=a,this.iTunesApi.fetchArtistAlbums(a).then(function(a){angular.copy(a,b.artistAlbums)})},a}();a.ArtistsCtrl=b;var c=function(){function a(){}return a}();a.ArtistDto=c;var d=function(){function a(){}return a}();a.AlbumDto=d}(djangoItunesStaticsApp||(djangoItunesStaticsApp={})),angular.module("djangoItunesStaticsApp").controller("ArtistsCtrl",djangoItunesStaticsApp.ArtistsCtrl);var djangoItunesStaticsApp;!function(a){var b=function(){function a(a){this.$http=a}return a.$inject=["$http"],a.prototype.addArtist=function(a){return this.$http.post("/api/v1/artists/",{name:a}).then(function(a){return a.data})},a.prototype.fetchArtists=function(){return this.$http.get("/api/v1/artists/").then(function(a){return a.data})},a.prototype.fetchArtistAlbums=function(a){return this.$http.get("/api/v1/artists/"+a+"/albums/").then(function(a){return a.data})},a}();a.ITunesApi=b}(djangoItunesStaticsApp||(djangoItunesStaticsApp={})),angular.module("djangoItunesStaticsAppInternal").service("iTunesApi",djangoItunesStaticsApp.ITunesApi);var djangoItunesStaticsApp;!function(a){function b(){return new a.ArtistItem}var c=function(){function a(){this.restrict="E",this.scope={artist:"="},this.link=function(a,b,c){},this.template="<div>{{artist.name}}</div>"}return a}();a.ArtistItem=c,a.artistItemFactory=b}(djangoItunesStaticsApp||(djangoItunesStaticsApp={})),angular.module("djangoItunesStaticsApp").directive("artistItem",djangoItunesStaticsApp.artistItemFactory);var djangoItunesStaticsApp;!function(a){function b(){return new a.Album}var c=function(){function a(){this.restrict="E",this.scope={album:"="},this.link=function(a,b,c){},this.template='\n        <md-card>\n            <md-card-title>\n              <md-card-title-text>\n                <span class="md-headline">{{album.name}}</span>\n                <span class="md-subhead">Release Date: {{album.releaseDate | date}}</span>\n              </md-card-title-text>\n            </md-card-title>\n            <md-card-content layout="row" layout-align="space-between">\n              <div class="md-media-md card-media">\n                <img ng-src="{{album.imageUrl}}">\n              </div>\n            </md-card-content>\n          </md-card>'}return a}();a.Album=c,a.albumFactory=b}(djangoItunesStaticsApp||(djangoItunesStaticsApp={})),angular.module("djangoItunesStaticsApp").directive("album",djangoItunesStaticsApp.albumFactory),angular.module("djangoItunesStaticsApp").run(["$templateCache",function(a){a.put("views/add.html",'<div class="page-container"> <form ng-submit="addCtrl.submit()" class="add-form"> <div class="form-wrapper"> <md-input-container class="add-input"> <label>Artist Name</label> <input type="text" ng-model="addCtrl.artist" required> </md-input-container> <md-button class="md-raised md-primary add-btn" type="submit">Add</md-button> <md-progress-linear ng-if="addCtrl.loading" md-mode="indeterminate"></md-progress-linear> </div> </form> </div>'),a.put("views/artists.html",'<div class="artists-page"> <div class="artists-page-wrapper"> <section class="left-nav"> <md-list class="list"> <md-subheader class="md-no-sticky">Artists</md-subheader> <md-list-item ng-repeat="artist in artistsCtrl.artists track by $index" ng-click="artistsCtrl.select(artist.id)" class="artist-list-item" ng-class="{selected: artistsCtrl.selected === artist.id}"> <artist-item class="artist-item" artist="artist"></artist-item> </md-list-item> </md-list> </section> <section class="right-content"> <md-input-container class="md-icon-float md-block"> <label>Search</label> <input ng-model="artistsCtrl.searchTerm" ng-model-options="{debounce:{\'default\': 500, \'blur\': 0 }}" type="text"> </md-input-container> <ul class="list album-list"> <li ng-repeat="album in artistsCtrl.artistAlbums | orderBy:\'-releaseDate\' | filter:artistsCtrl.searchTerm track by $index" class="album"> <album album="album"></album> </li> </ul> </section> </div> </div>')}]);